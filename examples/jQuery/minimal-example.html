<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>jQuery Calendar minimal Example</title>
    <style>
      table {
        border-collapse: collapse;
      }
      th,
      td {
        padding: 0;
      }
    </style>
  </head>

  <body>
    <h1>jQuery Calendar minimal Example</h1>
    <div id="calendar"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@verbpatch/jquery-calendar/dist/index.umd.js"></script>
    <script>
      $(document).ready(function () {
        $('#calendar').headlessCalendar({
          defaultView: 'month',
          startOfWeek: 0,
          locale: 'en-IN',
          onRender: function (cal) {
            const { view, monthData, weekData, dayData, timeSlots, utils } = cal;

            let html = `
            <table border="0" width="840" cellspacing="0" style="height:700px; border-left:1px solid; border-top:1px solid;">
              <thead>
                <tr>
                  <th colspan="2" style="border-bottom: 1px solid;">
                    <button type="button" id="btn-prev"> ← </button>
                    <button type="button" id="btn-today"> Today </button>
                    <button type="button" id="btn-next"> → </button>
                  </th>
                  <th colspan="3" style="border-bottom: 1px solid;">
                    <h3>
                      ${view === 'month' ? monthData?.monthName || '' : ''}
                      ${view === 'week' ? weekData?.weekRange || '' : ''}
                      ${view === 'day' ? dayData?.dayName || '' : ''}
                    </h3>
                  </th>
                  <th colspan="2" style="border-bottom: 1px solid; border-right:1px solid;">
                    <select id="view-select">
                      <option value="month" ${view === 'month' ? 'selected' : ''}>Month</option>
                      <option value="week" ${view === 'week' ? 'selected' : ''}>Week</option>
                      <option value="day" ${view === 'day' ? 'selected' : ''}>Day</option>
                    </select>
                  </th>
                </tr>
              </thead>
              <tbody>
          `;

            if (view === 'month' && monthData) {
              html += '<tr>';
              utils.daysofWeek('short').forEach((day) => {
                html += `<th style="width: 120px; border-right:1px solid; border-bottom:1px solid;">${day}</th>`;
              });
              html += '</tr>';

              monthData.weeks.forEach((week) => {
                html += '<tr>';
                week.forEach((date) => {
                  const isCurrentMonth = monthData.isCurrentMonth(date);
                  const isToday = monthData.isToday(date);
                  html += `
                  <td style="
                    ${!isCurrentMonth ? 'color: gray;' : ''}
                    ${isToday ? 'font-weight: bold;' : ''}
                    border-right: 1px solid; border-bottom: 1px solid;
                  ">
                    ${utils.formatDate(date, 'd')}
                  </td>
                `;
                });
                html += '</tr>';
              });
            } else if (view === 'week' && weekData) {
              html += `
              <tr>
                <td colspan="7" style="border-right:1px solid;">
                  <table cellpadding="5" cellspacing="0" width="100%">
                    <tbody>
                      <tr>
                        <td></td>
                        ${weekData.dates
                          .map(
                            (date) => `
                          <td style="${weekData.isToday(date) ? 'font-weight: bold;' : ''}">
                            ${utils.formatDateTime(date, 'EEE d')}
                          </td>
                        `,
                          )
                          .join('')}
                      </tr>
                      ${timeSlots
                        .map(
                          (slot) => `
                        <tr>
                          <td style="border-bottom: 1px solid;">${slot.label}</td>
                          ${weekData.dates
                            .map(
                              (date) => `
                            <td style="${weekData.isToday(date) ? 'font-weight: bold;' : ''} border-bottom: 1px solid;">
                              &nbsp;
                            </td>
                          `,
                            )
                            .join('')}
                        </tr>
                      `,
                        )
                        .join('')}
                    </tbody>
                  </table>
                </td>
              </tr>
            `;
            } else if (view === 'day' && dayData) {
              html += `
              <tr>
                <td colspan="7" align="center" style="border-right: 1px solid; border-bottom: 1px solid;">
                  ${dayData.dayName}
                </td>
              </tr>
              <tr>
                <td colspan="7" style="border-right: 1px solid;">
                  <table width="100%" cellspacing="0" style="height: 100%;">
                    <tbody>
                      ${timeSlots
                        .map(
                          (slot) => `
                        <tr>
                          <td width="25%" style="border-bottom: 1px solid;">
                            ${slot.label} &nbsp;
                          </td>
                        </tr>
                      `,
                        )
                        .join('')}
                    </tbody>
                  </table>
                </td>
              </tr>
            `;
            }

            html += '</tbody></table>';
            $('#calendar').html(html);
          },
        });

        $(document).on('click', '#btn-prev', function () {
          $('#calendar').headlessCalendar('goToPrevious');
        });

        $(document).on('click', '#btn-today', function () {
          $('#calendar').headlessCalendar('goToToday');
        });

        $(document).on('click', '#btn-next', function () {
          $('#calendar').headlessCalendar('goToNext');
        });

        $(document).on('change', '#view-select', function () {
          $('#calendar').headlessCalendar('changeView', this.value);
        });
      });
    </script>
  </body>
</html>
